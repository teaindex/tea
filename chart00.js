var chaqingData = {
	"AllIndex":[
		{"totalindex":90.58,"sale":3132993.0,"unixtimestamp":1527782400000},
		{"totalindex":85.15,"sale":3537018.0,"unixtimestamp":1527868800000}
	],
	"OneIndex":[
		{"totalindex":80.60,"sale":2846701.0,"unixtimestamp":1527782400000,"name":"绿茶"},
		{"totalindex":79.51,"sale":2865733.0,"unixtimestamp":1527868800000,"name":"绿茶"},
		{"totalindex":86.54,"sale":177337.0,"unixtimestamp":1527782400000,"name":"红茶"},
		{"totalindex":88.26,"sale":564810.0,"unixtimestamp":1527868800000,"name":"红茶"},
		{"totalindex":270.03,"sale":56840.0,"unixtimestamp":1527782400000,"name":"黑茶"},
		{"totalindex":182.67,"sale":51380.0,"unixtimestamp":1527868800000,"name":"黑茶"},
		{"totalindex":164.03,"sale":11810.0,"unixtimestamp":1527782400000,"name":"白茶"},
		{"totalindex":164.63,"sale":8890.0,"unixtimestamp":1527868800000,"name":"白茶"},
		{"totalindex":89.85,"sale":21510.0,"unixtimestamp":1527782400000,"name":"黄茶"},
		{"totalindex":86.75,"sale":27690.0,"unixtimestamp":1527868800000,"name":"黄茶"},
		{"totalindex":69.49,"sale":18795.0,"unixtimestamp":1527782400000,"name":"花茶"},
		{"totalindex":68.90,"sale":18515.0,"unixtimestamp":1527868800000,"name":"花茶"}
	],
	"ThreeIndex":[
		{"totalindex":49.21,"sale":9910.0,"unixtimestamp":1527782400000,"name":"峨眉山茶","belongtoname":"名优绿茶"},
		{"totalindex":46.67,"sale":9400.0,"unixtimestamp":1527868800000,"name":"峨眉山茶","belongtoname":"名优绿茶"},
		{"totalindex":86.76,"sale":13000.0,"unixtimestamp":1527782400000,"name":"贵州针","belongtoname":"名优绿茶"},
		{"totalindex":80.73,"sale":50200.0,"unixtimestamp":1527868800000,"name":"贵州针","belongtoname":"名优绿茶"},
		{"totalindex":102.60,"sale":234042.0,"unixtimestamp":1527782400000,"name":"卷曲形茶","belongtoname":"名优绿茶"},
		{"totalindex":102.80,"sale":207107.0,"unixtimestamp":1527868800000,"name":"卷曲形茶","belongtoname":"名优绿茶"},
		{"totalindex":43.53,"sale":2400.0,"unixtimestamp":1527782400000,"name":"湄潭翠芽","belongtoname":"名优绿茶"},
		{"totalindex":87.05,"sale":1200.0,"unixtimestamp":1527868800000,"name":"湄潭翠芽","belongtoname":"名优绿茶"},
		{"totalindex":82.30,"sale":200.0,"unixtimestamp":1527782400000,"name":"湄潭毛峰","belongtoname":"名优绿茶"},
		{"totalindex":41.15,"sale":400.0,"unixtimestamp":1527868800000,"name":"湄潭毛峰","belongtoname":"名优绿茶"},
		{"totalindex":35.09,"sale":14780.0,"unixtimestamp":1527782400000,"name":"蒙顶山茶","belongtoname":"名优绿茶"},
		{"totalindex":35.20,"sale":12925.0,"unixtimestamp":1527868800000,"name":"蒙顶山茶","belongtoname":"名优绿茶"},
		{"totalindex":97.88,"sale":4560.0,"unixtimestamp":1527782400000,"name":"钱塘龙井","belongtoname":"名优绿茶"},
		{"totalindex":82.42,"sale":5760.0,"unixtimestamp":1527868800000,"name":"钱塘龙井","belongtoname":"名优绿茶"},
		{"totalindex":87.33,"sale":337689.0,"unixtimestamp":1527782400000,"name":"四川扁形茶","belongtoname":"名优绿茶"},
		{"totalindex":86.65,"sale":325081.0,"unixtimestamp":1527868800000,"name":"四川扁形茶","belongtoname":"名优绿茶"},
		{"totalindex":128.73,"sale":183895.0,"unixtimestamp":1527782400000,"name":"条形茶","belongtoname":"名优绿茶"},
		{"totalindex":128.64,"sale":223181.0,"unixtimestamp":1527868800000,"name":"条形茶","belongtoname":"名优绿茶"},
		{"totalindex":72.39,"sale":38870.0,"unixtimestamp":1527782400000,"name":"永川秀芽","belongtoname":"名优绿茶"},
		{"totalindex":68.23,"sale":38220.0,"unixtimestamp":1527868800000,"name":"永川秀芽","belongtoname":"名优绿茶"},
		{"totalindex":47.82,"sale":248160.0,"unixtimestamp":1527782400000,"name":"越州龙井","belongtoname":"名优绿茶"},
		{"totalindex":47.67,"sale":249850.0,"unixtimestamp":1527868800000,"name":"越州龙井","belongtoname":"名优绿茶"},
		{"totalindex":63.69,"sale":1459195.0,"unixtimestamp":1527782400000,"name":"炒青绿茶","belongtoname":"大宗绿茶"},
		{"totalindex":68.32,"sale":1742409.0,"unixtimestamp":1527868800000,"name":"炒青绿茶","belongtoname":"大宗绿茶"},
		{"totalindex":144.76,"sale":300000.0,"unixtimestamp":1527782400000,"name":"烘青绿茶","belongtoname":"大宗绿茶"},
		{"totalindex":86.44,"sale":132810.0,"unixtimestamp":1527868800000,"name":"川红工夫　","belongtoname":"工夫红茶"},
		{"totalindex":86.46,"sale":137137.0,"unixtimestamp":1527782400000,"name":"川红工夫　","belongtoname":"工夫红茶"},
		{"totalindex":103.35,"sale":432000.0,"unixtimestamp":1527868800000,"name":"昭平红","belongtoname":"工夫红茶"},
		{"totalindex":94.73,"sale":36000.0,"unixtimestamp":1527782400000,"name":"昭平红","belongtoname":"工夫红茶"},
		{"totalindex":105.24,"sale":4420.0,"unixtimestamp":1527868800000,"name":"茯砖","belongtoname":"安化黑茶"},
		{"totalindex":81.60,"sale":4200.0,"unixtimestamp":1527782400000,"name":"遵义红","belongtoname":"工夫红茶"},
		{"totalindex":105.56,"sale":4560.0,"unixtimestamp":1527868800000,"name":"黑砖","belongtoname":"安化黑茶"},
		{"totalindex":97.14,"sale":4080.0,"unixtimestamp":1527782400000,"name":"茯砖","belongtoname":"安化黑茶"},
		{"totalindex":113.23,"sale":7380.0,"unixtimestamp":1527868800000,"name":"千两","belongtoname":"安化黑茶"},
		{"totalindex":96.71,"sale":2940.0,"unixtimestamp":1527782400000,"name":"黑砖","belongtoname":"安化黑茶"},
		{"totalindex":177.54,"sale":3320.0,"unixtimestamp":1527868800000,"name":"三尖","belongtoname":"安化黑茶"},
		{"totalindex":132.73,"sale":4380.0,"unixtimestamp":1527782400000,"name":"千两","belongtoname":"安化黑茶"},
		{"totalindex":202.94,"sale":5520.0,"unixtimestamp":1527782400000,"name":"三尖","belongtoname":"安化黑茶"},
		{"totalindex":128.35,"sale":1300.0,"unixtimestamp":1527868800000,"name":"康砖","belongtoname":"四川黑茶"},
		{"totalindex":136.25,"sale":920.0,"unixtimestamp":1527782400000,"name":"康砖","belongtoname":"四川黑茶"},
		{"totalindex":208.74,"sale":30400.0,"unixtimestamp":1527868800000,"name":"普洱熟茶","belongtoname":"普洱"},
		{"totalindex":346.47,"sale":19800.0,"unixtimestamp":1527782400000,"name":"普洱生茶","belongtoname":"普洱"},
		{"totalindex":164.03,"sale":11810.0,"unixtimestamp":1527782400000,"name":"白毫银针","belongtoname":"白毫银针"},
		{"totalindex":164.63,"sale":8890.0,"unixtimestamp":1527868800000,"name":"白毫银针","belongtoname":"白毫银针"},
		{"totalindex":166.02,"sale":19200.0,"unixtimestamp":1527782400000,"name":"普洱熟茶","belongtoname":"普洱"},
		{"totalindex":86.75,"sale":27690.0,"unixtimestamp":1527868800000,"name":"蒙顶黄芽","belongtoname":"黄芽茶"},
		{"totalindex":68.90,"sale":18515.0,"unixtimestamp":1527868800000,"name":"四川茉莉花茶","belongtoname":"茉莉花茶"},
		{"totalindex":89.85,"sale":21510.0,"unixtimestamp":1527782400000,"name":"蒙顶黄芽","belongtoname":"黄芽茶"},
		{"totalindex":69.49,"sale":18795.0,"unixtimestamp":1527782400000,"name":"四川茉莉花茶","belongtoname":"茉莉花茶"}
	],
	"TwoIndex":[
		{"totalindex":81.63,"unixtimestamp":1527782400000,"name":"名优绿茶","belongtoname":"绿茶"},
		{"totalindex":81.20,"unixtimestamp":1527868800000,"name":"名优绿茶","belongtoname":"绿茶"},
		{"totalindex":73.78,"unixtimestamp":1527782400000,"name":"大宗绿茶","belongtoname":"绿茶"},
		{"totalindex":68.32,"unixtimestamp":1527868800000,"name":"大宗绿茶","belongtoname":"绿茶"},
		{"totalindex":86.54,"unixtimestamp":1527782400000,"name":"工夫红茶","belongtoname":"红茶"},
		{"totalindex":88.26,"unixtimestamp":1527868800000,"name":"工夫红茶","belongtoname":"红茶"},
		{"totalindex":124.96,"unixtimestamp":1527782400000,"name":"安化黑茶","belongtoname":"黑茶"},
		{"totalindex":119.04,"unixtimestamp":1527868800000,"name":"安化黑茶","belongtoname":"黑茶"},
		{"totalindex":136.25,"unixtimestamp":1527782400000,"name":"四川黑茶","belongtoname":"黑茶"},
		{"totalindex":128.35,"unixtimestamp":1527868800000,"name":"四川黑茶","belongtoname":"黑茶"},
		{"totalindex":329.49,"unixtimestamp":1527782400000,"name":"普洱","belongtoname":"黑茶"},
		{"totalindex":208.74,"unixtimestamp":1527868800000,"name":"普洱","belongtoname":"黑茶"},
		{"totalindex":164.03,"unixtimestamp":1527782400000,"name":"白毫银针","belongtoname":"白茶"},
		{"totalindex":164.63,"unixtimestamp":1527868800000,"name":"白毫银针","belongtoname":"白茶"},
		{"totalindex":89.85,"unixtimestamp":1527782400000,"name":"黄芽茶","belongtoname":"黄茶"},
		{"totalindex":86.75,"unixtimestamp":1527868800000,"name":"黄芽茶","belongtoname":"黄茶"},
		{"totalindex":69.49,"unixtimestamp":1527782400000,"name":"茉莉花茶","belongtoname":"花茶"},
		{"totalindex":68.90,"unixtimestamp":1527868800000,"name":"茉莉花茶","belongtoname":"花茶"}
	]
};

var pifaData = {
	"AllIndex":[
		{"totalindex":90.58,"sale":3132993.0,"unixtimestamp":1527782400000},
		{"totalindex":85.15,"sale":3537018.0,"unixtimestamp":1527868800000}
	],
	"OneIndex":[
		{"totalindex":80.60,"sale":2846701.0,"unixtimestamp":1527782400000,"name":"绿茶"},
		{"totalindex":79.51,"sale":2865733.0,"unixtimestamp":1527868800000,"name":"绿茶"},
		{"totalindex":86.54,"sale":177337.0,"unixtimestamp":1527782400000,"name":"红茶"},
		{"totalindex":88.26,"sale":564810.0,"unixtimestamp":1527868800000,"name":"红茶"},
		{"totalindex":270.03,"sale":56840.0,"unixtimestamp":1527782400000,"name":"黑茶"},
		{"totalindex":182.67,"sale":51380.0,"unixtimestamp":1527868800000,"name":"黑茶"},
		{"totalindex":164.03,"sale":11810.0,"unixtimestamp":1527782400000,"name":"白茶"},
		{"totalindex":164.63,"sale":8890.0,"unixtimestamp":1527868800000,"name":"白茶"},
		{"totalindex":89.85,"sale":21510.0,"unixtimestamp":1527782400000,"name":"黄茶"},
		{"totalindex":86.75,"sale":27690.0,"unixtimestamp":1527868800000,"name":"黄茶"},
		{"totalindex":69.49,"sale":18795.0,"unixtimestamp":1527782400000,"name":"花茶"},
		{"totalindex":68.90,"sale":18515.0,"unixtimestamp":1527868800000,"name":"花茶"}
	],
	"ThreeIndex":[
		{"totalindex":49.21,"sale":9910.0,"unixtimestamp":1527782400000,"name":"峨眉山茶","belongtoname":"名优绿茶"},
		{"totalindex":46.67,"sale":9400.0,"unixtimestamp":1527868800000,"name":"峨眉山茶","belongtoname":"名优绿茶"},
		{"totalindex":86.76,"sale":13000.0,"unixtimestamp":1527782400000,"name":"贵州针","belongtoname":"名优绿茶"},
		{"totalindex":80.73,"sale":50200.0,"unixtimestamp":1527868800000,"name":"贵州针","belongtoname":"名优绿茶"},
		{"totalindex":102.60,"sale":234042.0,"unixtimestamp":1527782400000,"name":"卷曲形茶","belongtoname":"名优绿茶"},
		{"totalindex":102.80,"sale":207107.0,"unixtimestamp":1527868800000,"name":"卷曲形茶","belongtoname":"名优绿茶"},
		{"totalindex":43.53,"sale":2400.0,"unixtimestamp":1527782400000,"name":"湄潭翠芽","belongtoname":"名优绿茶"},
		{"totalindex":87.05,"sale":1200.0,"unixtimestamp":1527868800000,"name":"湄潭翠芽","belongtoname":"名优绿茶"},
		{"totalindex":82.30,"sale":200.0,"unixtimestamp":1527782400000,"name":"湄潭毛峰","belongtoname":"名优绿茶"},
		{"totalindex":41.15,"sale":400.0,"unixtimestamp":1527868800000,"name":"湄潭毛峰","belongtoname":"名优绿茶"},
		{"totalindex":35.09,"sale":14780.0,"unixtimestamp":1527782400000,"name":"蒙顶山茶","belongtoname":"名优绿茶"},
		{"totalindex":35.20,"sale":12925.0,"unixtimestamp":1527868800000,"name":"蒙顶山茶","belongtoname":"名优绿茶"},
		{"totalindex":97.88,"sale":4560.0,"unixtimestamp":1527782400000,"name":"钱塘龙井","belongtoname":"名优绿茶"},
		{"totalindex":82.42,"sale":5760.0,"unixtimestamp":1527868800000,"name":"钱塘龙井","belongtoname":"名优绿茶"},
		{"totalindex":87.33,"sale":337689.0,"unixtimestamp":1527782400000,"name":"四川扁形茶","belongtoname":"名优绿茶"},
		{"totalindex":86.65,"sale":325081.0,"unixtimestamp":1527868800000,"name":"四川扁形茶","belongtoname":"名优绿茶"},
		{"totalindex":128.73,"sale":183895.0,"unixtimestamp":1527782400000,"name":"条形茶","belongtoname":"名优绿茶"},
		{"totalindex":128.64,"sale":223181.0,"unixtimestamp":1527868800000,"name":"条形茶","belongtoname":"名优绿茶"},
		{"totalindex":72.39,"sale":38870.0,"unixtimestamp":1527782400000,"name":"永川秀芽","belongtoname":"名优绿茶"},
		{"totalindex":68.23,"sale":38220.0,"unixtimestamp":1527868800000,"name":"永川秀芽","belongtoname":"名优绿茶"},
		{"totalindex":47.82,"sale":248160.0,"unixtimestamp":1527782400000,"name":"越州龙井","belongtoname":"名优绿茶"},
		{"totalindex":47.67,"sale":249850.0,"unixtimestamp":1527868800000,"name":"越州龙井","belongtoname":"名优绿茶"},
		{"totalindex":63.69,"sale":1459195.0,"unixtimestamp":1527782400000,"name":"炒青绿茶","belongtoname":"大宗绿茶"},
		{"totalindex":68.32,"sale":1742409.0,"unixtimestamp":1527868800000,"name":"炒青绿茶","belongtoname":"大宗绿茶"},
		{"totalindex":144.76,"sale":300000.0,"unixtimestamp":1527782400000,"name":"烘青绿茶","belongtoname":"大宗绿茶"},
		{"totalindex":86.44,"sale":132810.0,"unixtimestamp":1527868800000,"name":"川红工夫　","belongtoname":"工夫红茶"},
		{"totalindex":86.46,"sale":137137.0,"unixtimestamp":1527782400000,"name":"川红工夫　","belongtoname":"工夫红茶"},
		{"totalindex":103.35,"sale":432000.0,"unixtimestamp":1527868800000,"name":"昭平红","belongtoname":"工夫红茶"},
		{"totalindex":94.73,"sale":36000.0,"unixtimestamp":1527782400000,"name":"昭平红","belongtoname":"工夫红茶"},
		{"totalindex":105.24,"sale":4420.0,"unixtimestamp":1527868800000,"name":"茯砖","belongtoname":"安化黑茶"},
		{"totalindex":81.60,"sale":4200.0,"unixtimestamp":1527782400000,"name":"遵义红","belongtoname":"工夫红茶"},
		{"totalindex":105.56,"sale":4560.0,"unixtimestamp":1527868800000,"name":"黑砖","belongtoname":"安化黑茶"},
		{"totalindex":97.14,"sale":4080.0,"unixtimestamp":1527782400000,"name":"茯砖","belongtoname":"安化黑茶"},
		{"totalindex":113.23,"sale":7380.0,"unixtimestamp":1527868800000,"name":"千两","belongtoname":"安化黑茶"},
		{"totalindex":96.71,"sale":2940.0,"unixtimestamp":1527782400000,"name":"黑砖","belongtoname":"安化黑茶"},
		{"totalindex":177.54,"sale":3320.0,"unixtimestamp":1527868800000,"name":"三尖","belongtoname":"安化黑茶"},
		{"totalindex":132.73,"sale":4380.0,"unixtimestamp":1527782400000,"name":"千两","belongtoname":"安化黑茶"},
		{"totalindex":202.94,"sale":5520.0,"unixtimestamp":1527782400000,"name":"三尖","belongtoname":"安化黑茶"},
		{"totalindex":128.35,"sale":1300.0,"unixtimestamp":1527868800000,"name":"康砖","belongtoname":"四川黑茶"},
		{"totalindex":136.25,"sale":920.0,"unixtimestamp":1527782400000,"name":"康砖","belongtoname":"四川黑茶"},
		{"totalindex":208.74,"sale":30400.0,"unixtimestamp":1527868800000,"name":"普洱熟茶","belongtoname":"普洱"},
		{"totalindex":346.47,"sale":19800.0,"unixtimestamp":1527782400000,"name":"普洱生茶","belongtoname":"普洱"},
		{"totalindex":164.03,"sale":11810.0,"unixtimestamp":1527782400000,"name":"白毫银针","belongtoname":"白毫银针"},
		{"totalindex":164.63,"sale":8890.0,"unixtimestamp":1527868800000,"name":"白毫银针","belongtoname":"白毫银针"},
		{"totalindex":166.02,"sale":19200.0,"unixtimestamp":1527782400000,"name":"普洱熟茶","belongtoname":"普洱"},
		{"totalindex":86.75,"sale":27690.0,"unixtimestamp":1527868800000,"name":"蒙顶黄芽","belongtoname":"黄芽茶"},
		{"totalindex":68.90,"sale":18515.0,"unixtimestamp":1527868800000,"name":"四川茉莉花茶","belongtoname":"茉莉花茶"},
		{"totalindex":89.85,"sale":21510.0,"unixtimestamp":1527782400000,"name":"蒙顶黄芽","belongtoname":"黄芽茶"},
		{"totalindex":69.49,"sale":18795.0,"unixtimestamp":1527782400000,"name":"四川茉莉花茶","belongtoname":"茉莉花茶"}
	],
	"TwoIndex":[
		{"totalindex":81.63,"unixtimestamp":1527782400000,"name":"名优绿茶","belongtoname":"绿茶"},
		{"totalindex":81.20,"unixtimestamp":1527868800000,"name":"名优绿茶","belongtoname":"绿茶"},
		{"totalindex":73.78,"unixtimestamp":1527782400000,"name":"大宗绿茶","belongtoname":"绿茶"},
		{"totalindex":68.32,"unixtimestamp":1527868800000,"name":"大宗绿茶","belongtoname":"绿茶"},
		{"totalindex":86.54,"unixtimestamp":1527782400000,"name":"工夫红茶","belongtoname":"红茶"},
		{"totalindex":88.26,"unixtimestamp":1527868800000,"name":"工夫红茶","belongtoname":"红茶"},
		{"totalindex":124.96,"unixtimestamp":1527782400000,"name":"安化黑茶","belongtoname":"黑茶"},
		{"totalindex":119.04,"unixtimestamp":1527868800000,"name":"安化黑茶","belongtoname":"黑茶"},
		{"totalindex":136.25,"unixtimestamp":1527782400000,"name":"四川黑茶","belongtoname":"黑茶"},
		{"totalindex":128.35,"unixtimestamp":1527868800000,"name":"四川黑茶","belongtoname":"黑茶"},
		{"totalindex":329.49,"unixtimestamp":1527782400000,"name":"普洱","belongtoname":"黑茶"},
		{"totalindex":208.74,"unixtimestamp":1527868800000,"name":"普洱","belongtoname":"黑茶"},
		{"totalindex":164.03,"unixtimestamp":1527782400000,"name":"白毫银针","belongtoname":"白茶"},
		{"totalindex":164.63,"unixtimestamp":1527868800000,"name":"白毫银针","belongtoname":"白茶"},
		{"totalindex":89.85,"unixtimestamp":1527782400000,"name":"黄芽茶","belongtoname":"黄茶"},
		{"totalindex":86.75,"unixtimestamp":1527868800000,"name":"黄芽茶","belongtoname":"黄茶"},
		{"totalindex":69.49,"unixtimestamp":1527782400000,"name":"茉莉花茶","belongtoname":"花茶"},
		{"totalindex":68.90,"unixtimestamp":1527868800000,"name":"茉莉花茶","belongtoname":"花茶"}
	],
	"FourIndex": [
		{"totalindex":48.02,"sale":2510.0,"unixtimestamp":1527782400000,"name":"采集标准1","belongtoname":"峨眉山茶"},
		{"totalindex":51.13,"sale":1789.0,"unixtimestamp":1527782400000,"name":"采集标准2","belongtoname":"峨眉山茶"},
		{"totalindex":22.80,"sale":3303.0,"unixtimestamp":1527782400000,"name":"采集标准3","belongtoname":"峨眉山茶"},
		{"totalindex":61.11,"sale":1960.0,"unixtimestamp":1527782400000,"name":"采集标准4","belongtoname":"峨眉山茶"},
		{"totalindex":47.56,"sale":2349.0,"unixtimestamp":1527868800000,"name":"采集标准1","belongtoname":"峨眉山茶"},
		{"totalindex":53.31,"sale":2011.0,"unixtimestamp":1527868800000,"name":"采集标准2","belongtoname":"峨眉山茶"},
		{"totalindex":41.54,"sale":4631.0,"unixtimestamp":1527868800000,"name":"采集标准3","belongtoname":"峨眉山茶"},
		{"totalindex":60.62,"sale":1955.0,"unixtimestamp":1527868800000,"name":"采集标准4","belongtoname":"峨眉山茶"}
	]
};

var jsondata = chaqingData;

var source = "PiFa";

var label1 = "DingJi";
var label2 = "DayIndex";
var genre = "AllIndex";		// 级别


var dataset = [];
var stock = [];


var allNames = [];
var dataLine = [];
var dataColumn = [];
var dataEvent = [];

for (var i=0;i<jsondata["AllIndex"].length;i++) {
	var flag = -1;
	if (allNames.length!=0)
		for (var a=0;a<allNames.length;a++)
			if (allNames[a]=="总计")
				flag = a;
	if (flag==-1) {
		allNames.push("总计");
		dataLine.push([]);
		dataColumn.push([]);
		flag = allNames.length-1;
	}
	dataLine[flag].push([jsondata[genre][i]["unixtimestamp"],jsondata[genre][i]["totalindex"]]);
	dataColumn[flag].push([jsondata[genre][i]["unixtimestamp"],jsondata[genre][i]["sale"]]);
}

for (var i=0;i<allNames.length;i++) {
	stock.push({
	// 解析折线图数据
		type: 'line',
		name: allNames[i],
		data: dataLine[i],
		tooltip: {
			valuePrefix: "类指数：",
			valueSuffix: "%",
			xDateFormat: '%Y年%B%e日'
		},
		events: {
			click: function() {
				genre = "OneIndex";
				parent = this.getName();//console.log(this.getName());
				redraw_chart();
			}
		}
	}, {
	// 解析柱状图数据
		type: 'column',
		yAxis: 1,
		name: allNames[i],
		data: dataColumn[i],
		tooltip: {
			valuePrefix: "销售额：",
			valueSuffix: "万元",
			xDateFormat: '%Y年%B%e日'
		},
		events: {
			click: function() {
				genre = "OneIndex";
				parent = this.getName();//console.log(this.getName());
				redraw_chart();
			}
		}
	});
}

var limitor = false;

//console.log(stock);

Highcharts.setOptions({
	lang: {
		months: ['1月', '2月', '3月', '4月', '5月', '6月',  '7月', '8月', '9月', '10月', '11月', '12月'],
		weekdays: ['星期日', '星期一', '星期二', '星期三', '星期四', '星期五', '星期六'],
		rangeSelectorZoom: ''
	}
});

Highcharts.stockChart('container00', {
	rangeSelector : {
			selected : 2,
			inputDateFormat: '%Y-%m-%d'
	},
	title : {
			text : '茶指数'
	},
	chart : {
		height : '60%', 
		spacingBottom: 15,
		backgroundColor: {
			linearGradient: [0, 0, 500, 500],
				stops: [
					[0, 'rgb(255, 255, 255)'],
					[1, 'rgb(240, 240, 255)']
				]
		}
	}, 
	exporting : {
		allowHTML: true
	},
	xAxis : {
		type: 'datetime',
		labels: {
			format: '{value:%B%e日}'
		}
	},
	yAxis : [{
		x: -3,
		title: {
			text: "指数"
		}, 
		labels: {
			align: "right", 
			x: -3
		}, 
		height: '65%',
		resize: {
			enabled: true
		},
		lineWidth: 2,
		type: 'logarithmic'
	}, {
		title: {
			text: "销售额"
		}, 
		labels: {
			align: "right", 
			x: -3
		}, 
		top: '65%', 
		height: '35%', 
		offset: 0,
		lineWidth: 2
	}], 
	legend: {
		enabled: true, 
		layout: 'horizontal', 
		floating: false, 
		itemHoverStyle: {'color': 'blue'}, 
		itemWidth: 120, 
		width: 820,
		navigation: {
			activeColor: '#3E576F',
			animation: true,
			arrowSize: 10,
			inactiveColor: '#CCC',
			style: {
				fontWeight: 'bold',
				color: '#333',
				fontSize: '12px'
			}
		}
	},
	/*tooltip : {
		valueSuffix: '%', 
		split: false,
		//shared: true
	},*/
	plotOptions : {
		line: {
			connectNulls: true, 
			gapSize: 5
		}, 
		series: {
			cursor: 'pointer', 
			showInNavigator: true, 
			events: {
				legendItemClick: function (event) {
					var same = this.name;
					//console.log(this.name);
					//console.log(this.userOptions.type);
					var legends = (this.userOptions.type=="line") ? 
						$('.highcharts-legend-item.highcharts-column-series') : 
						$('.highcharts-legend-item.highcharts-line-series');
					if (limitor)
						return true;
					for (var m=0;m<legends.length;m++) {
						//console.log(legends[m]);
						var found = legends.eq(m).find('tspan');
						//console.log(found[0].innerHTML);
						if (found[0].innerHTML==same) {
							limitor = true;
							legends.eq(m).click();
							limitor = false;
							break;
						}
					}
					return true;
				}
			}
		}
	},

	series : stock
});

$('.highcharts-legend-item.highcharts-column-series').attr("style","visibility: hidden;");

var parent = "AllIndex";

function redraw_chart() {
	//console.log(parent);
	stock = [];


	allNames = [];
	dataLine = [];
	dataColumn = [];
	dataEvent = [];

	/*jsondata[genre] = _.sortBy(jsondata[genre], function(d) {
        return d[0];
    });*/
    if (source=="PiFa") {
    	for (var i=0;i<jsondata[genre].length;i++) {
			var thisName = genre=="AllIndex" ? "总计" : jsondata[genre][i]["name"];
			if (genre!="AllIndex" && genre!="OneIndex" && parent!="")
				if (parent!=jsondata[genre][i]["belongtoname"])
					continue;
			var flag = -1;
			if (allNames.length!=0)
				for (var a=0;a<allNames.length;a++)
					if (allNames[a]==thisName)
						flag = a;
			if (flag==-1) {
				allNames.push(thisName);
				dataLine.push([]);
				dataColumn.push([]);
				dataEvent.push([]);
				flag = allNames.length-1;
			}
			//console.log(flag);
			
			// delete this
			if (genre=="TwoIndex") {
				var total = 0;
				for (var s=0;s<jsondata["ThreeIndex"].length;s++) {
					if (thisName!=jsondata["ThreeIndex"][s]["belongtoname"] || 
							jsondata["ThreeIndex"][s]["unixtimestamp"]!=jsondata["TwoIndex"][i]["unixtimestamp"])
						continue;
					//console.log(total);
					//console.log(jsondata["ThreeIndex"][s]["sale"]);
					total += jsondata["ThreeIndex"][s]["sale"];
					//console.log(total);
				}
				jsondata["TwoIndex"][i]["sale"] = total;
				//console.log(jsondata["ThreeIndex"][s]);
			}
			

			dataLine[flag].push([jsondata[genre][i]["unixtimestamp"],jsondata[genre][i]["totalindex"]]);
			dataColumn[flag].push([jsondata[genre][i]["unixtimestamp"],jsondata[genre][i]["sale"]]);
		}

		//console.log(dataLine);
		//console.log(dataColumn);
		//console.log(stock);

		for (var i=0;i<allNames.length;i++) {
			if (genre=="AllIndex") {
				stock.push({
				// 解析折线图数据
					type: 'line',
					name: allNames[i],
					data: dataLine[i],
					tooltip: {
						valuePrefix: "类指数：",
						valueSuffix: "%",
						xDateFormat: '%Y年%B%e日'
					},
					events: {
						click: function() {
							genre = "OneIndex";
							parent = this.getName();//console.log(this.getName());
							redraw_chart();
						}
					}
				}, {
				// 解析柱状图数据
					type: 'column',
					yAxis: 1,
					name: allNames[i],
					data: dataColumn[i],
					tooltip: {
						valuePrefix: "销售额：",
						valueSuffix: "万元",
						xDateFormat: '%Y年%B%e日'
					},
					events: {
						click: function() {
							genre = "OneIndex";
							parent = this.getName();//console.log(this.getName());
							redraw_chart();
						}
					}
				});
			}
			else if (genre=="OneIndex") {
				var visibility = i==0 ? true : false;
				stock.push({
				// 解析折线图数据
					type: 'line',
					name: allNames[i],
					data: dataLine[i],
					tooltip: {
						valuePrefix: "类指数：",
						valueSuffix: "%",
						xDateFormat: '%Y年%B%e日'
					},
					events: {
						click: function() {
							genre = "TwoIndex";
							parent = this.getName();//console.log(this.getName());
							redraw_chart();
						}
					},
					visible: visibility
				}, {
				// 解析柱状图数据
					type: 'column',
					yAxis: 1,
					name: allNames[i],
					data: dataColumn[i],
					tooltip: {
						valuePrefix: "销售额：",
						valueSuffix: "万元",
						xDateFormat: '%Y年%B%e日'
					},
					events: {
						click: function() {
							genre = "TwoIndex";
							parent = this.getName();//console.log(this.getName());
							redraw_chart();
						}
					},
					visible: visibility
				});
			}
			else if (genre=="TwoIndex") {
				var visibility = i==0 ? true : false;
				stock.push({
				// 解析折线图数据
					type: 'line',
					name: allNames[i],
					data: dataLine[i],
					tooltip: {
						valuePrefix: "类指数：",
						valueSuffix: "%",
						xDateFormat: '%Y年%B%e日'
					},
					events: {
						click: function() {
							genre = "ThreeIndex";
							parent = this.getName();//console.log(this.getName());
							redraw_chart();
						}
					},
					visible: visibility
				}, {
				// 解析柱状图数据
					type: 'column',
					yAxis: 1,
					name: allNames[i],
					data: dataColumn[i],
					tooltip: {
						valuePrefix: "销售额：",
						valueSuffix: "万元",
						xDateFormat: '%Y年%B%e日'
					},
					events: {
						click: function() {
							genre = "ThreeIndex";
							parent = this.getName();//console.log(this.getName());
							redraw_chart();
						}
					},
					visible: visibility
				});
			}
			else {
				var visibility = i==0 ? true : false;
				stock.push({
				// 解析折线图数据
					type: 'line',
					name: allNames[i],
					data: dataLine[i],
					tooltip: {
						valuePrefix: "类指数：",
						valueSuffix: "%",
						xDateFormat: '%Y年%B%e日'
					},
					events: {
						click: function() {
							genre = "AllIndex";
							parent = this.getName();//console.log(this.getName());
							redraw_chart();
						}
					},
					visible: visibility
				}, {
				// 解析柱状图数据
					type: 'column',
					yAxis: 1,
					name: allNames[i],
					data: dataColumn[i],
					tooltip: {
						valuePrefix: "销售额：",
						valueSuffix: "万元",
						xDateFormat: '%Y年%B%e日'
					},
					events: {
						click: function() {
							genre = "AllIndex";
							parent = this.getName();//console.log(this.getName());
							redraw_chart();
						}
					},
					visible: visibility
				});
			}
		}
    }

    else {
    	for (var i=0;i<jsondata[genre].length;i++) {
			var thisName = genre=="AllIndex" ? "总计" : jsondata[genre][i]["name"];
			if (genre!="AllIndex" && genre!="OneIndex" && parent!="")
				if (parent!=jsondata[genre][i]["belongtoname"])
					continue;
			var flag = -1;
			if (allNames.length!=0)
				for (var a=0;a<allNames.length;a++)
					if (allNames[a]==thisName)
						flag = a;
			if (flag==-1) {
				allNames.push(thisName);
				dataLine.push([]);
				dataColumn.push([]);
				dataEvent.push([]);
				flag = allNames.length-1;
			}
			//console.log(flag);

			dataLine[flag].push([jsondata[genre][i]["unixtimestamp"],jsondata[genre][i]["totalindex"]]);
			dataColumn[flag].push([jsondata[genre][i]["unixtimestamp"],jsondata[genre][i]["sale"]]);
		}

		//console.log(dataLine);
		//console.log(dataColumn);
		//console.log(stock);

		for (var i=0;i<allNames.length;i++) {
			if (genre=="AllIndex") {
				stock.push({
				// 解析折线图数据
					type: 'line',
					name: allNames[i],
					data: dataLine[i],
					tooltip: {
						valuePrefix: "类指数：",
						valueSuffix: "%",
						xDateFormat: '%Y年%B%e日'
					},
					events: {
						click: function() {
							genre = "OneIndex";
							parent = this.getName();//console.log(this.getName());
							redraw_chart();
						}
					},
					visible: visibility
				}, {
				// 解析柱状图数据
					type: 'column',
					yAxis: 1,
					name: allNames[i],
					data: dataColumn[i],
					tooltip: {
						valuePrefix: "销售额：",
						valueSuffix: "万元",
						xDateFormat: '%Y年%B%e日'
					},
					events: {
						click: function() {
							genre = "OneIndex";
							parent = this.getName();//console.log(this.getName());
							redraw_chart();
						}
					},
					visible: visibility
				});
			}
			else if (genre=="OneIndex") {
				var visibility = i==0 ? true : false;
				stock.push({
				// 解析折线图数据
					type: 'line',
					name: allNames[i],
					data: dataLine[i],
					tooltip: {
						valuePrefix: "类指数：",
						valueSuffix: "%",
						xDateFormat: '%Y年%B%e日'
					},
					events: {
						click: function() {
							genre = "TwoIndex";
							parent = this.getName();//console.log(this.getName());
							redraw_chart();
						}
					},
					visible: visibility
				}, {
				// 解析柱状图数据
					type: 'column',
					yAxis: 1,
					name: allNames[i],
					data: dataColumn[i],
					tooltip: {
						valuePrefix: "销售额：",
						valueSuffix: "万元",
						xDateFormat: '%Y年%B%e日'
					},
					events: {
						click: function() {
							genre = "TwoIndex";
							parent = this.getName();//console.log(this.getName());
							redraw_chart();
						}
					},
					visible: visibility
				});
			}
			else if (genre=="TwoIndex") {
				var visibility = i==0 ? true : false;
				stock.push({
				// 解析折线图数据
					type: 'line',
					name: allNames[i],
					data: dataLine[i],
					tooltip: {
						valuePrefix: "类指数：",
						valueSuffix: "%",
						xDateFormat: '%Y年%B%e日'
					},
					events: {
						click: function() {
							genre = "ThreeIndex";
							parent = this.getName();//console.log(this.getName());
							redraw_chart();
						}
					},
					visible: visibility
				}, {
				// 解析柱状图数据
					type: 'column',
					yAxis: 1,
					name: allNames[i],
					data: dataColumn[i],
					tooltip: {
						valuePrefix: "销售额：",
						valueSuffix: "万元",
						xDateFormat: '%Y年%B%e日'
					},
					events: {
						click: function() {
							genre = "ThreeIndex";
							parent = this.getName();//console.log(this.getName());
							redraw_chart();
						}
					},
					visible: visibility
				});
			}
			else if (genre=="ThreeIndex") {
				var visibility = i==0 ? true : false;
				stock.push({
				// 解析折线图数据
					type: 'line',
					name: allNames[i],
					data: dataLine[i],
					tooltip: {
						valuePrefix: "类指数：",
						valueSuffix: "%",
						xDateFormat: '%Y年%B%e日'
					},
					events: {
						click: function() {
							genre = "FourIndex";
							parent = this.getName();//console.log(this.getName());
							redraw_chart();
						}
					},
					visible: visibility
				}, {
				// 解析柱状图数据
					type: 'column',
					yAxis: 1,
					name: allNames[i],
					data: dataColumn[i],
					tooltip: {
						valuePrefix: "销售额：",
						valueSuffix: "万元",
						xDateFormat: '%Y年%B%e日'
					},
					events: {
						click: function() {
							genre = "FourIndex";
							parent = this.getName();//console.log(this.getName());
							redraw_chart();
						}
					},
					visible: visibility
				});
			}
			else {
				var visibility = i==0 ? true : false;
				stock.push({
				// 解析折线图数据
					type: 'line',
					name: allNames[i],
					data: dataLine[i],
					tooltip: {
						valuePrefix: "类指数：",
						valueSuffix: "%",
						xDateFormat: '%Y年%B%e日'
					},
					events: {
						click: function() {
							genre = "AllIndex";
							parent = this.getName();//console.log(this.getName());
							redraw_chart();
						}
					},
					visible: visibility
				}, {
				// 解析柱状图数据
					type: 'column',
					yAxis: 1,
					name: allNames[i],
					data: dataColumn[i],
					tooltip: {
						valuePrefix: "销售额：",
						valueSuffix: "万元",
						xDateFormat: '%Y年%B%e日'
					},
					events: {
						click: function() {
							genre = "AllIndex";
							parent = this.getName();//console.log(this.getName());
							redraw_chart();
						}
					},
					visible: visibility
				});
			}
		}
    }

	Highcharts.stockChart('container00', {
			rangeSelector : {
					selected : 2,
					inputDateFormat: '%Y-%m-%d'
			},
			title : {
					text : '茶指数'
			},
			chart : {
				height : '60%', 
				spacingBottom: 15,
				backgroundColor: {
					linearGradient: [0, 0, 500, 500],
						stops: [
							[0, 'rgb(255, 255, 255)'],
							[1, 'rgb(240, 240, 255)']
						]
				}
			}, 
			yAxis : [{
				x: -3,
				title: {
					text: "指数"
				}, 
				labels: {
					align: "right", 
					x: -3
				}, 
				height: '65%',
				resize: {
					enabled: true
				},
				lineWidth: 2
			}, {
				title: {
					text: "销售额"
				}, 
				labels: {
					align: "right", 
					x: -3
				}, 
				top: '65%', 
				height: '35%', 
				offset: 0,
				lineWidth: 2,
				type: 'logarithmic'
			}],
			legend: {
				enabled: true, 
				layout: 'horizontal', 
				floating: false, 
				itemHoverStyle: {'color': 'blue'}, 
				itemWidth: 120, 
				width: 820,
				navigation: {
					activeColor: '#3E576F',
					animation: true,
					arrowSize: 10,
					inactiveColor: '#CCC',
					style: {
						fontWeight: 'bold',
						color: '#333',
						fontSize: '12px'
					}
				}
			},
			/*tooltip : {
				valueSuffix: '%', 
				split: false,
				//shared: true
			},*/
			plotOptions : {
				line: {
					connectNulls: true, 
					gapSize: 5
				}, 
				series: {
					cursor: 'pointer', 
					showInNavigator: true, 
					events: {
						legendItemClick: function (event) {
							var same = this.name;
							//console.log(this.name);
							//console.log(this.userOptions.type);
							var legends = (this.userOptions.type=="line") ? 
								$('.highcharts-legend-item.highcharts-column-series') : 
								$('.highcharts-legend-item.highcharts-line-series');
							if (limitor)
								return true;
							for (var m=0;m<legends.length;m++) {
								//console.log(legends[m]);
								var found = legends.eq(m).find('tspan');
								//console.log(found[0].innerHTML);
								if (found[0].innerHTML==same) {
									limitor = true;
									legends.eq(m).click();
									limitor = false;
									break;
								}
							}
							return true;
						}
					}
				}
			},

			series : stock
	});
	$('.highcharts-legend-item.highcharts-column-series').attr("style","visibility: hidden;");
}


$('#back').click(function(){
	switch (genre) {
		case "AllIndex":
			return;
		case "OneIndex":
			genre = "AllIndex";
			break;
		case "TwoIndex":
			genre = "OneIndex";
			break;
		case "ThreeIndex":
			genre = "TwoIndex";
			break;
		default:
			genre = "ThreeIndex";
	}
	parent = "";
	redraw_chart();
});

$('#display').click(function(){
	$.ajax({
		url: "http://cccqqf.top:8081/test/salesandindex",
		type: "POST",
		dataType: "json",
		async: true,
		data : [source,label1,label2],
		success: function(data){
		    jsondata = $.parseJSON(data);
		    alert(object);
		    redraw_chart();
		},
		error: function(msg){
			alert("!!!ERROR");
			console.log(msg);
		}
	});
});

$('#switch').click(function() {
	if ($('#switch').text()=="茶青市场") {
		$('#switch').text("批发市场");
		source = "ChaQing";
		jsondata = pifaData;
		genre = "AllIndex";
		redraw_chart();
	}
	else {
		$('#switch').text("茶青市场");
		source = "Pifa";
		jsondata = chaqingData;
		genre = "AllIndex";
		redraw_chart();
	}
});

$('#showall').click(function() {
	stock = [];

	allNames = [];
	dataLine = [];
	dataColumn = [];
	dataEvent = [];

	/*jsondata[genre] = _.sortBy(jsondata[genre], function(d) {
        return d[0];
    });*/
    if (source=="PiFa") {
    	for (var i=0;i<jsondata[genre].length;i++) {
			var thisName = genre=="AllIndex" ? "总计" : jsondata[genre][i]["name"];
			if (genre!="AllIndex" && genre!="OneIndex" && parent!="")
				if (parent!=jsondata[genre][i]["belongtoname"])
					continue;
			var flag = -1;
			if (allNames.length!=0)
				for (var a=0;a<allNames.length;a++)
					if (allNames[a]==thisName)
						flag = a;
			if (flag==-1) {
				allNames.push(thisName);
				dataLine.push([]);
				dataColumn.push([]);
				dataEvent.push([]);
				flag = allNames.length-1;
			}
			//console.log(flag);
			
			// delete this
			if (genre=="TwoIndex") {
				var total = 0;
				for (var s=0;s<jsondata["ThreeIndex"].length;s++) {
					if (thisName!=jsondata["ThreeIndex"][s]["belongtoname"] || 
							jsondata["ThreeIndex"][s]["unixtimestamp"]!=jsondata["TwoIndex"][i]["unixtimestamp"])
						continue;
					//console.log(total);
					//console.log(jsondata["ThreeIndex"][s]["sale"]);
					total += jsondata["ThreeIndex"][s]["sale"];
					//console.log(total);
				}
				jsondata["TwoIndex"][i]["sale"] = total;
				//console.log(jsondata["ThreeIndex"][s]);
			}
			

			dataLine[flag].push([jsondata[genre][i]["unixtimestamp"],jsondata[genre][i]["totalindex"]]);
			dataColumn[flag].push([jsondata[genre][i]["unixtimestamp"],jsondata[genre][i]["sale"]]);
		}

		//console.log(dataLine);
		//console.log(dataColumn);
		//console.log(stock);

		for (var i=0;i<allNames.length;i++) {
			if (genre=="AllIndex") {
				stock.push({
				// 解析折线图数据
					type: 'line',
					name: allNames[i],
					data: dataLine[i],
					tooltip: {
						valuePrefix: "类指数：",
						valueSuffix: "%",
						xDateFormat: '%Y年%B%e日'
					},
					events: {
						click: function() {
							genre = "OneIndex";
							parent = this.getName();//console.log(this.getName());
							redraw_chart();
						}
					}
				}, {
				// 解析柱状图数据
					type: 'column',
					yAxis: 1,
					name: allNames[i],
					data: dataColumn[i],
					tooltip: {
						valuePrefix: "销售额：",
						valueSuffix: "万元",
						xDateFormat: '%Y年%B%e日'
					},
					events: {
						click: function() {
							genre = "OneIndex";
							parent = this.getName();//console.log(this.getName());
							redraw_chart();
						}
					}
				});
			}
			else if (genre=="OneIndex") {
				stock.push({
				// 解析折线图数据
					type: 'line',
					name: allNames[i],
					data: dataLine[i],
					tooltip: {
						valuePrefix: "类指数：",
						valueSuffix: "%",
						xDateFormat: '%Y年%B%e日'
					},
					events: {
						click: function() {
							genre = "TwoIndex";
							parent = this.getName();//console.log(this.getName());
							redraw_chart();
						}
					}
				}, {
				// 解析柱状图数据
					type: 'column',
					yAxis: 1,
					name: allNames[i],
					data: dataColumn[i],
					tooltip: {
						valuePrefix: "销售额：",
						valueSuffix: "万元",
						xDateFormat: '%Y年%B%e日'
					},
					events: {
						click: function() {
							genre = "TwoIndex";
							parent = this.getName();//console.log(this.getName());
							redraw_chart();
						}
					}
				});
			}
			else if (genre=="TwoIndex") {
				stock.push({
				// 解析折线图数据
					type: 'line',
					name: allNames[i],
					data: dataLine[i],
					tooltip: {
						valuePrefix: "类指数：",
						valueSuffix: "%",
						xDateFormat: '%Y年%B%e日'
					},
					events: {
						click: function() {
							genre = "ThreeIndex";
							parent = this.getName();//console.log(this.getName());
							redraw_chart();
						}
					}
				}, {
				// 解析柱状图数据
					type: 'column',
					yAxis: 1,
					name: allNames[i],
					data: dataColumn[i],
					tooltip: {
						valuePrefix: "销售额：",
						valueSuffix: "万元",
						xDateFormat: '%Y年%B%e日'
					},
					events: {
						click: function() {
							genre = "ThreeIndex";
							parent = this.getName();//console.log(this.getName());
							redraw_chart();
						}
					}
				});
			}
			else {
				stock.push({
				// 解析折线图数据
					type: 'line',
					name: allNames[i],
					data: dataLine[i],
					tooltip: {
						valuePrefix: "类指数：",
						valueSuffix: "%",
						xDateFormat: '%Y年%B%e日'
					},
					events: {
						click: function() {
							genre = "AllIndex";
							parent = this.getName();//console.log(this.getName());
							redraw_chart();
						}
					}
				}, {
				// 解析柱状图数据
					type: 'column',
					yAxis: 1,
					name: allNames[i],
					data: dataColumn[i],
					tooltip: {
						valuePrefix: "销售额：",
						valueSuffix: "万元",
						xDateFormat: '%Y年%B%e日'
					},
					events: {
						click: function() {
							genre = "AllIndex";
							parent = this.getName();//console.log(this.getName());
							redraw_chart();
						}
					}
				});
			}
		}
    }

    else {
    	for (var i=0;i<jsondata[genre].length;i++) {
			var thisName = genre=="AllIndex" ? "总计" : jsondata[genre][i]["name"];
			if (genre!="AllIndex" && genre!="OneIndex" && parent!="")
				if (parent!=jsondata[genre][i]["belongtoname"])
					continue;
			var flag = -1;
			if (allNames.length!=0)
				for (var a=0;a<allNames.length;a++)
					if (allNames[a]==thisName)
						flag = a;
			if (flag==-1) {
				allNames.push(thisName);
				dataLine.push([]);
				dataColumn.push([]);
				dataEvent.push([]);
				flag = allNames.length-1;
			}
			//console.log(flag);

			dataLine[flag].push([jsondata[genre][i]["unixtimestamp"],jsondata[genre][i]["totalindex"]]);
			dataColumn[flag].push([jsondata[genre][i]["unixtimestamp"],jsondata[genre][i]["sale"]]);
		}

		//console.log(dataLine);
		//console.log(dataColumn);
		//console.log(stock);

		for (var i=0;i<allNames.length;i++) {
			if (genre=="AllIndex") {
				stock.push({
				// 解析折线图数据
					type: 'line',
					name: allNames[i],
					data: dataLine[i],
					tooltip: {
						valuePrefix: "类指数：",
						valueSuffix: "%",
						xDateFormat: '%Y年%B%e日'
					},
					events: {
						click: function() {
							genre = "OneIndex";
							parent = this.getName();//console.log(this.getName());
							redraw_chart();
						}
					}
				}, {
				// 解析柱状图数据
					type: 'column',
					yAxis: 1,
					name: allNames[i],
					data: dataColumn[i],
					tooltip: {
						valuePrefix: "销售额：",
						valueSuffix: "万元",
						xDateFormat: '%Y年%B%e日'
					},
					events: {
						click: function() {
							genre = "OneIndex";
							parent = this.getName();//console.log(this.getName());
							redraw_chart();
						}
					}
				});
			}
			else if (genre=="OneIndex") {
				stock.push({
				// 解析折线图数据
					type: 'line',
					name: allNames[i],
					data: dataLine[i],
					tooltip: {
						valuePrefix: "类指数：",
						valueSuffix: "%",
						xDateFormat: '%Y年%B%e日'
					},
					events: {
						click: function() {
							genre = "TwoIndex";
							parent = this.getName();//console.log(this.getName());
							redraw_chart();
						}
					}
				}, {
				// 解析柱状图数据
					type: 'column',
					yAxis: 1,
					name: allNames[i],
					data: dataColumn[i],
					tooltip: {
						valuePrefix: "销售额：",
						valueSuffix: "万元",
						xDateFormat: '%Y年%B%e日'
					},
					events: {
						click: function() {
							genre = "TwoIndex";
							parent = this.getName();//console.log(this.getName());
							redraw_chart();
						}
					}
				});
			}
			else if (genre=="TwoIndex") {
				stock.push({
				// 解析折线图数据
					type: 'line',
					name: allNames[i],
					data: dataLine[i],
					tooltip: {
						valuePrefix: "类指数：",
						valueSuffix: "%",
						xDateFormat: '%Y年%B%e日'
					},
					events: {
						click: function() {
							genre = "ThreeIndex";
							parent = this.getName();//console.log(this.getName());
							redraw_chart();
						}
					}
				}, {
				// 解析柱状图数据
					type: 'column',
					yAxis: 1,
					name: allNames[i],
					data: dataColumn[i],
					tooltip: {
						valuePrefix: "销售额：",
						valueSuffix: "万元",
						xDateFormat: '%Y年%B%e日'
					},
					events: {
						click: function() {
							genre = "ThreeIndex";
							parent = this.getName();//console.log(this.getName());
							redraw_chart();
						}
					}
				});
			}
			else if (genre=="ThreeIndex") {
				stock.push({
				// 解析折线图数据
					type: 'line',
					name: allNames[i],
					data: dataLine[i],
					tooltip: {
						valuePrefix: "类指数：",
						valueSuffix: "%",
						xDateFormat: '%Y年%B%e日'
					},
					events: {
						click: function() {
							genre = "FourIndex";
							parent = this.getName();//console.log(this.getName());
							redraw_chart();
						}
					}
				}, {
				// 解析柱状图数据
					type: 'column',
					yAxis: 1,
					name: allNames[i],
					data: dataColumn[i],
					tooltip: {
						valuePrefix: "销售额：",
						valueSuffix: "万元",
						xDateFormat: '%Y年%B%e日'
					},
					events: {
						click: function() {
							genre = "FourIndex";
							parent = this.getName();//console.log(this.getName());
							redraw_chart();
						}
					}
				});
			}
			else {
				stock.push({
				// 解析折线图数据
					type: 'line',
					name: allNames[i],
					data: dataLine[i],
					tooltip: {
						valuePrefix: "类指数：",
						valueSuffix: "%",
						xDateFormat: '%Y年%B%e日'
					},
					events: {
						click: function() {
							genre = "AllIndex";
							parent = this.getName();//console.log(this.getName());
							redraw_chart();
						}
					}
				}, {
				// 解析柱状图数据
					type: 'column',
					yAxis: 1,
					name: allNames[i],
					data: dataColumn[i],
					tooltip: {
						valuePrefix: "销售额：",
						valueSuffix: "万元",
						xDateFormat: '%Y年%B%e日'
					},
					events: {
						click: function() {
							genre = "AllIndex";
							parent = this.getName();//console.log(this.getName());
							redraw_chart();
						}
					}
				});
			}
		}
    }

	Highcharts.stockChart('container00', {
			rangeSelector : {
					selected : 2,
					inputDateFormat: '%Y-%m-%d'
			},
			title : {
					text : '茶指数'
			},
			chart : {
				height : '60%', 
				spacingBottom: 15,
				backgroundColor: {
					linearGradient: [0, 0, 500, 500],
						stops: [
							[0, 'rgb(255, 255, 255)'],
							[1, 'rgb(240, 240, 255)']
						]
				}
			}, 
			yAxis : [{
				x: -3,
				title: {
					text: "指数"
				}, 
				labels: {
					align: "right", 
					x: -3
				}, 
				height: '65%',
				resize: {
					enabled: true
				},
				lineWidth: 2
			}, {
				title: {
					text: "销售额"
				}, 
				labels: {
					align: "right", 
					x: -3
				}, 
				top: '65%', 
				height: '35%', 
				offset: 0,
				lineWidth: 2,
				type: 'logarithmic'
			}],
			legend: {
				enabled: true, 
				layout: 'horizontal', 
				floating: false, 
				itemHoverStyle: {'color': 'blue'}, 
				itemWidth: 120, 
				width: 820,
				navigation: {
					activeColor: '#3E576F',
					animation: true,
					arrowSize: 10,
					inactiveColor: '#CCC',
					style: {
						fontWeight: 'bold',
						color: '#333',
						fontSize: '12px'
					}
				}
			},
			/*tooltip : {
				valueSuffix: '%', 
				split: false,
				//shared: true
			},*/
			plotOptions : {
				line: {
					connectNulls: true, 
					gapSize: 5
				}, 
				series: {
					cursor: 'pointer', 
					showInNavigator: true, 
					events: {
						legendItemClick: function (event) {
							var same = this.name;
							//console.log(this.name);
							//console.log(this.userOptions.type);
							var legends = (this.userOptions.type=="line") ? 
								$('.highcharts-legend-item.highcharts-column-series') : 
								$('.highcharts-legend-item.highcharts-line-series');
							if (limitor)
								return true;
							for (var m=0;m<legends.length;m++) {
								//console.log(legends[m]);
								var found = legends.eq(m).find('tspan');
								//console.log(found[0].innerHTML);
								if (found[0].innerHTML==same) {
									limitor = true;
									legends.eq(m).click();
									limitor = false;
									break;
								}
							}
							return true;
						}
					}
				}
			},

			series : stock
	});
	$('.highcharts-legend-item.highcharts-column-series').attr("style","visibility: hidden;");
});

/*
$('#select').click(function() {
	if ($('#treelist').attr("style")=="display: block; position: absolute; font-size: 60%;") {
		$('#treelist').attr("style","display: none;");
	}
	else
		$('#treelist').attr("style","display: block; position: absolute; font-size: 60%;");
})

$('.tree li:has(ul)').addClass('parent_li').find(' > span').attr('title', 'Collapse this branch');
$('.tree li.parent_li > span').on('click', function (e) {
	var children = $(this).parent('li.parent_li').find(' > ul > li');
	if (children.is(":visible")) {
		children.hide('fast');
		$(this).attr('title', 'Expand this branch').find(' > i').addClass('icon-plus-sign').removeClass('icon-minus-sign');
	} else {
		children.show('fast');
		$(this).attr('title', 'Collapse this branch').find(' > i').addClass('icon-minus-sign').removeClass('icon-plus-sign');
	}
	e.stopPropagation();
});
*/